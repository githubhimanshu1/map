"use strict";

const mapMetaData = {
  "all": {
    mapname: "custom/world-palestine-highres",
    data: [
      ['gl', 0],
      ['sh', 1],
      ['bu', 2],
      ['lk', 3],
      ['as', 4],
      ['dk', 5],
      ['fo', 6],
      ['gu', 7],
      ['mp', 8],
      ['um', 9],
      ['us', 10],
      ['vi', 11],
      ['ca', 12],
      ['st', 13],
      ['jp', 14],
      ['cv', 15],
      ['dm', 16],
      ['sc', 17],
      ['nz', 18],
      ['ye', 19],
      ['jm', 20],
      ['ws', 21],
      ['om', 22],
      ['in', 23],
      ['vc', 24],
      ['bd', 25],
      ['sb', 26],
      ['lc', 27],
      ['fr', 28],
      ['nr', 29],
      ['no', 30],
      ['fm', 31],
      ['kn', 32],
      ['cn', 33],
      ['bh', 34],
      ['to', 35],
      ['fi', 36],
      ['id', 37],
      ['mu', 38],
      ['se', 39],
      ['tt', 40],
      ['sw', 41],
      ['br', 42],
      ['bs', 43],
      ['pw', 44],
      ['ec', 45],
      ['au', 46],
      ['tv', 47],
      ['mh', 48],
      ['cl', 49],
      ['ki', 50],
      ['ph', 51],
      ['gd', 52],
      ['ee', 53],
      ['ag', 54],
      ['es', 55],
      ['bb', 56],
      ['it', 57],
      ['mt', 58],
      ['mv', 59],
      ['sp', 60],
      ['pg', 61],
      ['vu', 62],
      ['sg', 63],
      ['gb', 64],
      ['cy', 65],
      ['gr', 66],
      ['km', 67],
      ['fj', 68],
      ['ru', 69],
      ['va', 70],
      ['sm', 71],
      ['am', 72],
      ['az', 73],
      ['ls', 74],
      ['tj', 75],
      ['ml', 76],
      ['dz', 77],
      ['tw', 78],
      ['uz', 79],
      ['tz', 80],
      ['ar', 81],
      ['sa', 82],
      ['nl', 83],
      ['ae', 84],
      ['ch', 85],
      ['pt', 86],
      ['my', 87],
      ['pa', 88],
      ['tr', 89],
      ['ir', 90],
      ['ht', 91],
      ['do', 92],
      ['gw', 93],
      ['hr', 94],
      ['th', 95],
      ['mx', 96],
      ['kw', 97],
      ['de', 98],
      ['gq', 99],
      ['cnm', 100],
      ['nc', 101],
      ['ie', 102],
      ['kz', 103],
      ['ge', 104],
      ['pl', 105],
      ['lt', 106],
      ['ug', 107],
      ['cd', 108],
      ['mk', 109],
      ['al', 110],
      ['ng', 111],
      ['cm', 112],
      ['bj', 113],
      ['tl', 114],
      ['tm', 115],
      ['kh', 116],
      ['pe', 117],
      ['mw', 118],
      ['mn', 119],
      ['ao', 120],
      ['mz', 121],
      ['za', 122],
      ['cr', 123],
      ['sv', 124],
      ['bz', 125],
      ['co', 126],
      ['kp', 127],
      ['kr', 128],
      ['gy', 129],
      ['hn', 130],
      ['ga', 131],
      ['ni', 132],
      ['et', 133],
      ['sd', 134],
      ['so', 135],
      ['gh', 136],
      ['ci', 137],
      ['si', 138],
      ['gt', 139],
      ['ba', 140],
      ['jo', 141],
      ['sy', 142],
      ['we', 143],
      ['il', 144],
      ['eg', 145],
      ['zm', 146],
      ['mc', 147],
      ['uy', 148],
      ['rw', 149],
      ['bo', 150],
      ['cg', 151],
      ['eh', 152],
      ['rs', 153],
      ['me', 154],
      ['tg', 155],
      ['mm', 156],
      ['la', 157],
      ['af', 158],
      ['jk', 159],
      ['pk', 160],
      ['bg', 161],
      ['ua', 162],
      ['ro', 163],
      ['qa', 164],
      ['li', 165],
      ['at', 166],
      ['sk', 167],
      ['sz', 168],
      ['hu', 169],
      ['ly', 170],
      ['ne', 171],
      ['lu', 172],
      ['ad', 173],
      ['lr', 174],
      ['sl', 175],
      ['bn', 176],
      ['mr', 177],
      ['be', 178],
      ['iq', 179],
      ['gm', 180],
      ['ma', 181],
      ['td', 182],
      ['kv', 183],
      ['lb', 184],
      ['sx', 185],
      ['dj', 186],
      ['er', 187],
      ['bi', 188],
      ['sn', 189],
      ['gn', 190],
      ['zw', 191],
      ['py', 192],
      ['by', 193],
      ['lv', 194],
      ['bt', 195],
      ['na', 196],
      ['bf', 197],
      ['ss', 198],
      ['cf', 199],
      ['md', 200],
      ['gz', 201],
      ['ke', 202],
      ['bw', 203],
      ['cz', 204],
      ['pr', 205],
      ['tn', 206],
      ['cu', 207],
      ['vn', 208],
      ['mg', 209],
      ['ve', 210],
      ['is', 211],
      ['np', 212],
      ['sr', 213],
      ['kg', 214]
    ]
  },
  "us": {
    mapname: "countries/us/us-all",
    data: [
      ['us-ma', 0],
      ['us-wa', 1],
      ['us-ca', 2],
      ['us-or', 3],
      ['us-wi', 4],
      ['us-me', 5],
      ['us-mi', 6],
      ['us-nv', 7],
      ['us-nm', 8],
      ['us-co', 9],
      ['us-wy', 10],
      ['us-ks', 11],
      ['us-ne', 12],
      ['us-ok', 13],
      ['us-mo', 14],
      ['us-il', 15],
      ['us-in', 16],
      ['us-vt', 17],
      ['us-ar', 18],
      ['us-tx', 19],
      ['us-ri', 20],
      ['us-al', 21],
      ['us-ms', 22],
      ['us-nc', 23],
      ['us-va', 24],
      ['us-ia', 25],
      ['us-md', 26],
      ['us-de', 27],
      ['us-pa', 28],
      ['us-nj', 29],
      ['us-ny', 30],
      ['us-id', 31],
      ['us-sd', 32],
      ['us-ct', 33],
      ['us-nh', 34],
      ['us-ky', 35],
      ['us-oh', 36],
      ['us-tn', 37],
      ['us-wv', 38],
      ['us-dc', 39],
      ['us-la', 40],
      ['us-fl', 41],
      ['us-ga', 42],
      ['us-sc', 43],
      ['us-mn', 44],
      ['us-mt', 45],
      ['us-nd', 46],
      ['us-az', 47],
      ['us-ut', 48],
      ['us-hi', 49],
      ['us-ak', 50]
    ]
  },
  "emea": {
    mapname: "countries/gb/gb-all",
    data: [['gb-ay', 0],
    ['gb-3270', 1],
    ['gb-hi', 2],
    ['gb-ab', 3],
    ['gb-ps', 4],
    ['gb-wi', 5],
    ['gb-my', 6],
    ['gb-7398', 7],
    ['gb-eb', 8],
    ['gb-lc', 9],
    ['gb-2393', 10],
    ['gb-db', 11],
    ['gb-de', 12],
    ['gb-an', 13],
    ['gb-bl', 14],
    ['gb-ng', 15],
    ['gb-do', 16],
    ['gb-2458', 17],
    ['gb-er', 18],
    ['gb-ea', 19],
    ['gb-gg', 20],
    ['gb-ed', 21],
    ['gb-ic', 22],
    ['gb-2446', 23],
    ['gb-nn', 24],
    ['gb-rf', 25],
    ['gb-sa', 26],
    ['gb-sl', 27],
    ['gb-wd', 28],
    ['gb-ar', 29],
    ['gb-as', 30],
    ['gb-fk', 31],
    ['gb-zg', 32],
    ['gb-cc', 33],
    ['gb-du', 34],
    ['gb-fi', 35],
    ['gb-ml', 36],
    ['gb-wh', 37],
    ['gb-bo', 38],
    ['gb-dh', 39],
    ['gb-da', 40],
    ['gb-hp', 41],
    ['gb-mb', 42],
    ['gb-rc', 43],
    ['gb-zt', 44],
    ['gb-ha', 45],
    ['gb-zh', 46],
    ['gb-2318', 47],
    ['gb-gc', 48],
    ['gb-mk', 49],
    ['gb-bu', 50],
    ['gb-bn', 51],
    ['gb-bs', 52],
    ['gb-ns', 53],
    ['gb-sj', 54],
    ['gb-2389', 55],
    ['gb-ds', 56],
    ['gb-2391', 57],
    ['gb-ht', 58],
    ['gb-cm', 59],
    ['gb-kh', 60],
    ['gb-ne', 61],
    ['gb-ba', 62],
    ['gb-xb', 63],
    ['gb-ke', 64],
    ['gb-bz', 65],
    ['gb-be', 66],
    ['gb-cn', 67],
    ['gb-eg', 68],
    ['gb-ef', 69],
    ['gb-gr', 70],
    ['gb-hf', 71],
    ['gb-hu', 72],
    ['gb-it', 73],
    ['gb-kc', 74],
    ['gb-cy', 75],
    ['gb-me', 76],
    ['gb-rb', 77],
    ['gb-ru', 78],
    ['gb-su', 79],
    ['gb-th', 80],
    ['gb-wf', 81],
    ['gb-ww', 82],
    ['gb-we', 83],
    ['gb-li', 84],
    ['gb-bf', 85],
    ['gb-ld', 86],
    ['gb-nm', 87],
    ['gb-am', 88],
    ['gb-bb', 89],
    ['gb-cr', 90],
    ['gb-dn', 91],
    ['gb-2347', 92],
    ['gb-lb', 93],
    ['gb-mf', 94],
    ['gb-om', 95],
    ['gb-lr', 96],
    ['gb-cf', 97],
    ['gb-nw', 98],
    ['gb-2354', 99],
    ['gb-dw', 100],
    ['gb-cl', 101],
    ['gb-by', 102],
    ['gb-cs', 103],
    ['gb-pe', 104],
    ['gb-2301', 105],
    ['gb-gd', 106],
    ['gb-sp', 107],
    ['gb-po', 108],
    ['gb-mt', 109],
    ['gb-bj', 110],
    ['gb-cp', 111],
    ['gb-rt', 112],
    ['gb-ca', 113],
    ['gb-vg', 114],
    ['gb-np', 115],
    ['gb-sw', 116],
    ['gb-7122', 117],
    ['gb-bw', 118],
    ['gb-la', 119],
    ['gb-ey', 120],
    ['gb-yk', 121],
    ['gb-di', 122],
    ['gb-fl', 123],
    ['gb-wx', 124],
    ['gb-bg', 125],
    ['gb-no', 126],
    ['gb-tf', 127],
    ['gb-lm', 128],
    ['gb-sb', 129],
    ['gb-fe', 130],
    ['gb-ny', 131],
    ['gb-2420', 132],
    ['gb-tb', 133],
    ['gb-ex', 134],
    ['gb-nf', 135],
    ['gb-bh', 136],
    ['gb-hv', 137],
    ['gb-tr', 138],
    ['gb-ss', 139],
    ['gb-ws', 140],
    ['gb-wr', 141],
    ['gb-hd', 142],
    ['gb-kt', 143],
    ['gb-sr', 144],
    ['gb-es', 145],
    ['gb-ox', 146],
    ['gb-sn', 147],
    ['gb-na', 148],
    ['gb-rl', 149],
    ['gb-hk', 150],
    ['gb-hy', 151],
    ['gb-hr', 152],
    ['gb-lt', 153],
    ['gb-lw', 154],
    ['gb-nh', 155],
    ['gb-sq', 156],
    ['gb-he', 157],
    ['gb-st', 158],
    ['gb-wc', 159],
    ['gb-tk', 160],
    ['gb-6338', 161],
    ['gb-nb', 162],
    ['gb-2367', 163],
    ['gb-7113', 164],
    ['gb-7114', 165],
    ['gb-7115', 166],
    ['gb-7116', 167],
    ['gb-2364', 168],
    ['gb-7118', 169],
    ['gb-7119', 170],
    ['gb-wt', 171],
    ['gb-ms', 172],
    ['gb-7117', 173],
    ['gb-3265', 174],
    ['gb-7130', 175],
    ['gb-7131', 176],
    ['gb-7132', 177],
    ['gb-7133', 178],
    ['gb-3266', 179],
    ['gb-7121', 180],
    ['gb-7123', 181],
    ['gb-7124', 182],
    ['gb-7125', 183],
    ['gb-7126', 184],
    ['gb-7127', 185],
    ['gb-7128', 186],
    ['gb-7129', 187],
    ['gb-2366', 188],
    ['gb-nt', 189],
    ['gb-3267', 190],
    ['gb-7134', 191],
    ['gb-7135', 192],
    ['gb-nl', 193],
    ['gb-7136', 194],
    ['gb-2377', 195],
    ['gb-7137', 196],
    ['gb-7138', 197],
    ['gb-7139', 198],
    ['gb-7140', 199],
    ['gb-7141', 200],
    ['gb-7142', 201],
    ['gb-2381', 202],
    ['gb-bd', 203],
    ['gb-2388', 204],
    ['gb-7143', 205],
    ['gb-7144', 206],
    ['gb-7145', 207],
    ['gb-7146', 208],
    ['gb-7147', 209],
    ['gb-7149', 210],
    ['gb-so', 211],
    ['gb-7150', 212],
    ['gb-7151', 213],
    ['gb-pb', 214],
    ['gb-iw', 215],
    ['gb-mo', 216],
    ['gb-ag', 217],
    ['gb-el', 218],
    ['gb-sm', 219],
    ['gb-ci', 220],
    ['gb-hl', 221],
    ['gb-co', 222],
    ['gb-cw', 223],
    ['gb-nd', 224],
    ['gb-dg', 225],
    ['gb-cu', 226],
    ['gb-sf', 227],
    ['gb-mw', 228],
    ['gb-lu', 229],
    ['gb-wl', 230],
    ['gb-3271', 231]
    ]
  },
  "swiss": {
    mapname: "countries/ch/ch-all",
    data: [['ch-fr', 0],
    ['ch-lu', 1],
    ['ch-ni', 2],
    ['ch-vs', 3],
    ['ch-sg', 4],
    ['ch-ar', 5],
    ['ch-ti', 6],
    ['ch-gl', 7],
    ['ch-gr', 8],
    ['ch-sz', 9],
    ['ch-tg', 10],
    ['ch-sh', 11],
    ['ch-ur', 12],
    ['ch-zh', 13],
    ['ch-zg', 14],
    ['ch-vd', 15],
    ['ch-bl', 16],
    ['ch-be', 17],
    ['ch-bs', 18],
    ['ch-so', 19],
    ['ch-nw', 20],
    ['ch-ai', 21],
    ['ch-ge', 22],
    ['ch-ju', 23],
    ['ch-ne', 24],
    ['ch-ag', 25]]
  },
  "asia": {
    mapname: "custom/asia",
    data: [
      ['ir', 0],
      ['ph', 1],
      ['sa', 2],
      ['jp', 3],
      ['th', 4],
      ['om', 5],
      ['ye', 6],
      ['in', 7],
      ['kr', 8],
      ['bd', 9],
      ['sp', 10],
      ['cn', 11],
      ['bh', 12],
      ['mm', 13],
      ['id', 14],
      ['sg', 15],
      ['ru', 16],
      ['sh', 17],
      ['my', 18],
      ['az', 19],
      ['am', 20],
      ['vn', 21],
      ['tj', 22],
      ['uz', 23],
      ['tl', 24],
      ['kh', 25],
      ['bt', 26],
      ['ge', 27],
      ['kz', 28],
      ['il', 29],
      ['sy', 30],
      ['jo', 31],
      ['tm', 32],
      ['cnm', 33],
      ['mn', 34],
      ['kw', 35],
      ['iq', 36],
      ['ae', 37],
      ['la', 38],
      ['pk', 39],
      ['jk', 40],
      ['qa', 41],
      ['tr', 42],
      ['bn', 43],
      ['af', 44],
      ['kp', 45],
      ['lb', 46],
      ['nc', 47],
      ['cy', 48],
      ['tw', 49],
      ['np', 50],
      ['lk', 51],
      ['kg', 52]
    ]
  }
}

const mapUtility = {

  init: function (ref, data, region = "us") {

    mapUtility.regionloader(ref, mapMetaData[region]['data'], region);

  },
  regionloader: function (ref, data, region) {

    console.log(mapMetaData[region]['mapname']);
    // Create the chart
    Highcharts.mapChart(ref, {
      chart: {
        map: mapMetaData[region]['mapname']
      },
      mapNavigation: {
        enabled: true,
        buttonOptions: {
          verticalAlign: 'top'
        }
      },
      colorAxis: {
        min: 0
      },

      series: [{
        animantion: true,
        data: mapMetaData[region]['data'],
        enableMouseTracking: false,
        name: 'Random data',
        states: {
          hover: {
            color: '#9acd32'
          }
        },
        dataLabels: {
          enabled: true,
          format: '<div class="circles" onmouseover="mapUtility.tooltip(event,{point.value})">{point.value}</div>',
          useHTML: true
        }
      }]
    });
    console.log(`#${ref}`);
    jQuery(`#${ref}`).hide().fadeIn(800);
  },
  tooltip: function (event, value) {
    if (event.srcElement.className.indexOf("tooltipstered") < 0) {
      console.log(value); console.log(event.srcElement.innerText);
      let txt = event.srcElement.innerText;
      $('.circles').tooltipster({
        interactive: true,
        content: `<table>
        <tr>
          <th>Company</th>
          <th>Contact</th>
          <th>Country</th>
        </tr>
        <tr>
          <td>Alfreds Futterkiste</td>
          <td>Maria Anders</td>
          <td>Germany</td>
        </tr>
        <tr>
          <td>Centro comercial Moctezuma</td>
          <td>Francisco Chang</td>
          <td>Mexico</td>
        </tr>
        <tr>
          <td>Ernst Handel</td>
          <td>Roland Mendel</td>
          <td>Austria</td>
        </tr>
        <tr>
          <td>Island Trading</td>
          <td>Helen Bennett</td>
          <td>UK</td>
        </tr>
        <tr>
          <td>Laughing Bacchus Winecellars</td>
          <td>Yoshi Tannamuri</td>
          <td>Canada</td>
        </tr>
        <tr>
          <td>Magazzini Alimentari Riuniti</td>
          <td>Giovanni Rovelli</td>
          <td>Italy</td>
        </tr>
      </table>
      `,
        contentCloning: false,
        contentAsHTML: true,
        animation: 'fade',

      });
    }
  }
};


(() => {
  window.document.mapUtility = mapUtility;

})();
